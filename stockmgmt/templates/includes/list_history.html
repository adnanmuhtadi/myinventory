{% extends 'base.html' %}

{% block title %} Used Items {% endblock %}

{% load crispy_forms_tags %}

{% block content %}

<form method="POST" action="">{% csrf_token %}
    <div class="row">
        <div class="col-3">
            {{ form.household|as_crispy_field }}
        </div>
        <div class="col-3">
            {{ form.room|as_crispy_field }}
        </div>
        <div class="col-3">
            {{ form.category|as_crispy_field }}
        </div>
        <div class="col-3">
            {{ form.item_name|as_crispy_field }}
        </div>
        <div class="col-3">
            {{ form.start_date|as_crispy_field }}
        </div>
        <div class="col-3">
            {{ form.end_date|as_crispy_field }}
        </div>
    </div>
    <div class="row">
        <div class="col">
            {{ form.export_to_CSV|as_crispy_field }}
        </div>
    </div>
    <input type="submit" value="Search" />
</form>
<br>

<div class="display_table">
    <table class="table">
        <thead>
            <tr>
                <th>COUNT</th>
                <th>HOUSEHOLD</th>
                <th>ROOM</th>
                <th>LOCATION</th>
                <th>CATEGORY</th>
                <th>ITEM NAME</th>

                <th>QUANTITY IN STORE</th>
                <th>ISSUE QUANTITY</th>
                <th>RECEIVE QUANTITY</th>
                <th>ISSUE TO</th>
                <th>ISSUE BY</th>
                <th>LAST UPDATED</th>
            </tr>
        </thead>
        {% for instance in queryset %}
        <tr>
            <td>{{forloop.counter}}</td>
            <td>{{instance.household}}</td>
            <td>{{instance.room}}</td>
            <td>{{instance.location}}</td>
            <td>{{instance.category}}</td>
            <td>{{instance.item_name}}</td>

            <td>{{instance.quantity}}</td>
            <td>{{instance.issue_quantity}}</td>
            <td>{{instance.receive_quantity}}</td>
            <td>{{instance.issue_to}}</td>
            <td>{{instance.issue_by}}</td>
            <td>{{instance.last_updated|date:"d-m-Y"}}</td>
        </tr>
        {% endfor %}
    </table>
</div>

{% endblock %}